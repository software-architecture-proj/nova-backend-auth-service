# Dockerfile.dev

FROM golang:1.24-alpine

WORKDIR /app

# Install git, often needed by Go module tools and watchers like 'air'
RUN apk add --no-cache git

# Install 'air' - using the new module path
RUN go install github.com/air-verse/air@latest # <-- CHANGED THIS LINE

# Copy go.mod and go.sum to cache dependencies
COPY go.mod go.sum ./
RUN go mod download

# IMPORTANT: Do NOT copy the rest of your source code here for development.
# The source code will be bind-mounted from your host machine via docker-compose.yml.

# Expose the port your Go service listens on (e.g., 50053)
EXPOSE 50053

# Set the command to run 'air'. 'air' will then watch for file changes,
# recompile your application, and restart it.
CMD ["air"]